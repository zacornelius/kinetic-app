
> web@0.1.0 dev
> next dev --turbopack

   â–² Next.js 15.5.2 (Turbopack)
   - Local:        http://localhost:3000
   - Network:      http://172.31.31.34:3000

 âœ“ Starting...
 âœ“ Ready in 954ms
 â—‹ Compiling /admin/data-explorer ...
 âœ“ Compiled /admin/data-explorer in 4.7s
 â¨¯ ./src/app/admin/data-explorer/page.tsx:696:8
Parsing ecmascript source code failed
[0m [90m 694 |[39m           [33m<[39m[33m/[39m[33mdiv[39m[33m>[39m
 [90m 695 |[39m         [33m<[39m[33m/[39m[33mdiv[39m[33m>[39m
[31m[1m>[22m[39m[90m 696 |[39m       )}
 [90m     |[39m        [31m[1m^[22m[39m
 [90m 697 |[39m
 [90m 698 |[39m       {activeTab [33m===[39m [32m"lineItems"[39m [33m&&[39m (
 [90m 699 |[39m         [33m<[39m[33mdiv[39m className[33m=[39m[32m"bg-white border rounded-lg overflow-hidden"[39m[33m>[39m[0m

Unexpected token. Did you mean `{'}'}` or `&rbrace;`?


 â—‹ Compiling /_error ...
 âœ“ Compiled /_error in 1847ms
 GET /admin/data-explorer 500 in 6715ms
 â¨¯ ./src/app/admin/data-explorer/page.tsx:696:8
Parsing ecmascript source code failed
[0m [90m 694 |[39m           [33m<[39m[33m/[39m[33mdiv[39m[33m>[39m
 [90m 695 |[39m         [33m<[39m[33m/[39m[33mdiv[39m[33m>[39m
[31m[1m>[22m[39m[90m 696 |[39m       )}
 [90m     |[39m        [31m[1m^[22m[39m
 [90m 697 |[39m
 [90m 698 |[39m       {activeTab [33m===[39m [32m"lineItems"[39m [33m&&[39m (
 [90m 699 |[39m         [33m<[39m[33mdiv[39m className[33m=[39m[32m"bg-white border rounded-lg overflow-hidden"[39m[33m>[39m[0m

Unexpected token. Did you mean `{'}'}` or `&rbrace;`?


 GET /admin/data-explorer 500 in 51ms
 âœ“ Compiled in 145ms
 âœ“ Compiled /admin/data-explorer in 17ms
 GET /admin/data-explorer 200 in 419ms
 GET /admin/data-explorer 200 in 121ms
 GET /admin/data-explorer 200 in 111ms
 GET /admin/data-explorer 200 in 101ms
 âš  Cross origin request detected from 3.145.159.251 to /_next/* resource. In a future major version of Next.js, you will need to explicitly configure "allowedDevOrigins" in next.config to allow this.
Read more: https://nextjs.org/docs/app/api-reference/config/next-config-js/allowedDevOrigins
 â—‹ Compiling /favicon.ico ...
 âœ“ Compiled /favicon.ico in 623ms
 GET /api/inquiries 200 in 932ms
 GET /favicon.ico?favicon.0b3bf435.ico 200 in 964ms
 âœ“ Compiled /api/orders in 125ms
 GET /api/orders 200 in 492ms
 âœ“ Compiled /api/users in 126ms
 GET /api/users 200 in 390ms
 âœ“ Compiled /api/customers in 102ms
 GET /api/customers 200 in 353ms
 âœ“ Compiled /api/shopify/orders in 99ms
 GET /api/shopify/orders 200 in 347ms
 âœ“ Compiled /api/shopify/customers in 105ms
 GET /api/shopify/customers 200 in 354ms
 âœ“ Compiled /api/line-items in 96ms
 GET /api/line-items 200 in 346ms
 âœ“ Compiled /api/customers/[email]/orders in 97ms
Error fetching customer orders: SqliteError: no such table: orders
    at GET (src/app/api/customers/[email]/orders/route.ts:12:23)
  10 |     const email = decodeURIComponent(emailParam);
  11 |     
> 12 |     const orders = db.prepare(`
     |                       ^
  13 |       SELECT 
  14 |         o.id,
  15 |         o.createdAt, {
  code: 'SQLITE_ERROR'
}
 GET /api/customers/luttrell%40itctel.com/orders 500 in 1050ms
 âœ“ Compiled /admin in 395ms
 GET /admin 200 in 533ms
 GET /api/users 200 in 245ms
 GET /admin/data-explorer 200 in 165ms
 GET /api/inquiries 200 in 245ms
 GET /api/orders 200 in 341ms
 GET /api/users 200 in 240ms
 GET /api/customers 200 in 244ms
 GET /api/shopify/orders 200 in 248ms
 GET /api/shopify/customers 200 in 241ms
 GET /api/line-items 200 in 250ms
 âœ“ Compiled in 138ms
 GET /admin/data-explorer 200 in 242ms
 GET /favicon.ico?favicon.0b3bf435.ico 200 in 263ms
 GET /api/inquiries 200 in 260ms
 GET /api/orders 200 in 336ms
 GET /api/users 200 in 240ms
 GET /api/customers 200 in 250ms
 GET /api/shopify/orders 200 in 249ms
 GET /api/shopify/customers 200 in 284ms
 GET /api/line-items 200 in 246ms
 GET /admin 200 in 107ms
 GET /api/users 200 in 254ms
 GET /admin/data-explorer 200 in 323ms
 âœ“ Compiled /api/shopify/sync-incremental in 182ms
 âœ“ Compiled /api/shopify/sync-orders in 104ms
Making request to: https://f184d9-2.myshopify.com/admin/api/2023-10/orders.json?limit=250&since_id=6031487336645
Shop: f184d9-2
Access token: shpat_f934...
Response status: 200
Response headers: {
  'alt-svc': 'h3=":443"; ma=86400',
  'cf-cache-status': 'DYNAMIC',
  'cf-ray': '979f220cfc09725b-CMH',
  connection: 'keep-alive',
  'content-encoding': 'gzip',
  'content-security-policy': "default-src 'self' data: blob: 'unsafe-inline' 'unsafe-eval' https://* shopify-pos://*; block-all-mixed-content; child-src 'self' https://* shopify-pos://*; connect-src 'self' wss://* https://*; frame-ancestors 'none'; img-src 'self' data: blob: https:; script-src https://cdn.shopify.com https://cdn.shopifycdn.net https://checkout.pci.shopifyinc.com https://checkout.pci.shopifyinc.com/build/75a428d/card_fields.js https://api.stripe.com https://mpsnare.iesnare.com https://appcenter.intuit.com https://www.paypal.com https://js.braintreegateway.com https://c.paypal.com https://maps.googleapis.com https://www.google-analytics.com https://v.shopify.com 'self' 'unsafe-inline' 'unsafe-eval'; upgrade-insecure-requests; report-uri /csp-report?source%5Baction%5D=index&source%5Bapp%5D=Shopify&source%5Bcontroller%5D=admin%2Forders&source%5Bsection%5D=admin_api&source%5Buuid%5D=7fc7352a-ca29-4762-87a3-a180f686e4fd-1757006169; report-to shopify-csp",
  'content-type': 'application/json; charset=utf-8',
  date: 'Thu, 04 Sep 2025 17:16:09 GMT',
  link: '<https://f184d9-2.myshopify.com/admin/api/2023-10/orders.json?limit=250&page_info=eyJvcmRlciI6ImlkIGFzYyIsImxhc3RfaWQiOjYwMzE2NTY2MTYxMzMsImxhc3RfdmFsdWUiOiI2MDMxNjU2NjE2MTMzIiwiZGlyZWN0aW9uIjoicHJldiJ9>; rel="previous"',
  nel: '{"success_fraction":0.01,"report_to":"cf-nel","max_age":604800}',
  'referrer-policy': 'origin-when-cross-origin',
  'report-to': '{"endpoints":[{"url":"https:\\/\\/a.nel.cloudflare.com\\/report\\/v4?s=J12TtadR92m48GpzLrEcC5FZ%2BpLpNEtVanoDhziMJ2G6rTRb4OV%2BIs%2BWAjPhxh3%2FcKZbyvFHtcC9X0RxKehUjYgNemlQA7adhWdVWMkJyNyNHe0zV3ffx3MywDnTuFsRCNoOTe%2BFejc%3D"}],"group":"cf-nel","max_age":604800}',
  'reporting-endpoints': 'shopify-csp="/csp-report?source%5Baction%5D=index&source%5Bapp%5D=Shopify&source%5Bcontroller%5D=admin%2Forders&source%5Bsection%5D=admin_api&source%5Buuid%5D=7fc7352a-ca29-4762-87a3-a180f686e4fd-1757006169"',
  server: 'cloudflare',
  'server-timing': 'processing;dur=141, _y;desc="49ee3215-a225-4091-9daa-e58e75d5f2da", _s;desc="a294f107-85d0-4975-9d30-645b9b3141f9", cfRequestDuration;dur=203.000069',
  'strict-transport-security': 'max-age=7889238',
  'transfer-encoding': 'chunked',
  vary: 'Accept-Encoding',
  'x-content-type-options': 'nosniff',
  'x-dc': 'gcp-us-central1,gcp-us-central1,gcp-us-central1',
  'x-download-options': 'noopen',
  'x-frame-options': 'DENY',
  'x-permitted-cross-domain-policies': 'none',
  'x-request-id': '7fc7352a-ca29-4762-87a3-a180f686e4fd-1757006169',
  'x-shardid': '196',
  'x-shopid': '63730155717',
  'x-shopify-api-version': '2024-04',
  'x-shopify-api-version-warning': 'https://shopify.dev/concepts/about-apis/versioning',
  'x-shopify-shop-api-call-limit': '1/40',
  'x-sorting-hat-podid': '196',
  'x-sorting-hat-shopid': '63730155717',
  'x-stats-apiclientid': '155586658305',
  'x-stats-apipermissionid': '500490371269',
  'x-stats-userid': '',
  'x-xss-protection': '1; mode=block'
}
Fetched 1 orders. Total so far: 1
Progress: Fetched 1 orders from 1 pages
Shopify sync error: SqliteError: no such table: orderLineItems
    at <unknown> (src/app/api/shopify/sync-orders/route.ts:459:31)
    at POST (src/app/api/shopify/sync-orders/route.ts:480:45)
  457 |
  458 |       // Insert order line items
> 459 |       const lineItemStmt = db.prepare(`
      |                               ^
  460 |         INSERT OR REPLACE INTO orderLineItems (
  461 |           id, orderId, productId, shopifyVariantId, sku, title, quantity, price, totalPrice, vendor
  462 |         ) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?) {
  code: 'SQLITE_ERROR'
}
 POST /api/shopify/sync-orders 500 in 687ms
 POST /api/shopify/sync-incremental 500 in 1129ms
Making request to: https://f184d9-2.myshopify.com/admin/api/2023-10/orders.json?limit=250&since_id=6031487336645
Shop: f184d9-2
Access token: shpat_1234...
Response status: 401
Response headers: {
  'alt-svc': 'h3=":443"; ma=86400',
  'cf-cache-status': 'DYNAMIC',
  'cf-ray': '979f255cbefc8a31-CMH',
  connection: 'keep-alive',
  'content-security-policy': "default-src 'self' data: blob: 'unsafe-inline' 'unsafe-eval' https://* shopify-pos://*; block-all-mixed-content; child-src 'self' https://* shopify-pos://*; connect-src 'self' wss://* https://*; frame-ancestors 'none'; img-src 'self' data: blob: https:; script-src https://cdn.shopify.com https://cdn.shopifycdn.net https://checkout.pci.shopifyinc.com https://checkout.pci.shopifyinc.com/build/75a428d/card_fields.js https://api.stripe.com https://mpsnare.iesnare.com https://appcenter.intuit.com https://www.paypal.com https://js.braintreegateway.com https://c.paypal.com https://maps.googleapis.com https://www.google-analytics.com https://v.shopify.com 'self' 'unsafe-inline' 'unsafe-eval'; upgrade-insecure-requests; report-uri /csp-report?source%5Baction%5D=index&source%5Bapp%5D=Shopify&source%5Bcontroller%5D=admin%2Forders&source%5Bsection%5D=admin_api&source%5Buuid%5D=ca4a1e8b-e1b1-4efb-bdda-ee94eedda608-1757006304; report-to shopify-csp",
  'content-type': 'application/json; charset=utf-8',
  date: 'Thu, 04 Sep 2025 17:18:24 GMT',
  nel: '{"success_fraction":0.01,"report_to":"cf-nel","max_age":604800}',
  'referrer-policy': 'origin-when-cross-origin',
  'report-to': '{"endpoints":[{"url":"https:\\/\\/a.nel.cloudflare.com\\/report\\/v4?s=RSs40U793osa4y479X6fLLFgN1DWL5bJSgKtnBEJ3hVUnvD1KapYmDONyjc7Xpsxwvp91FkBVB1cXFkmRGZmq9lVXHfPy6qoLA2qxTdcff3todEpwyKHh7yRU4LEbZcWxlHKFaxPgRM%3D"}],"group":"cf-nel","max_age":604800}',
  'reporting-endpoints': 'shopify-csp="/csp-report?source%5Baction%5D=index&source%5Bapp%5D=Shopify&source%5Bcontroller%5D=admin%2Forders&source%5Bsection%5D=admin_api&source%5Buuid%5D=ca4a1e8b-e1b1-4efb-bdda-ee94eedda608-1757006304"',
  server: 'cloudflare',
  'server-timing': 'processing;dur=23, _y;desc="220870dd-8535-4f0c-aa83-27a27b104e29", _s;desc="71da2881-c22f-4f86-b2cc-5e76ae88a751", cfRequestDuration;dur=118.999958',
  'strict-transport-security': 'max-age=7889238',
  'transfer-encoding': 'chunked',
  'www-authenticate': 'Basic Realm="Shopify API Authentication"',
  'x-content-type-options': 'nosniff',
  'x-dc': 'gcp-us-central1,gcp-us-central1,gcp-us-central1',
  'x-download-options': 'noopen',
  'x-frame-options': 'DENY',
  'x-permitted-cross-domain-policies': 'none',
  'x-request-id': 'ca4a1e8b-e1b1-4efb-bdda-ee94eedda608-1757006304',
  'x-shardid': '196',
  'x-shopid': '63730155717',
  'x-sorting-hat-podid': '196',
  'x-sorting-hat-shopid': '63730155717',
  'x-xss-protection': '1; mode=block'
}
Error response body: {"errors":"[API] Invalid API key or access token (unrecognized login or wrong password)"}
Shopify sync error: Error: Shopify API error: 401 Unauthorized - {"errors":"[API] Invalid API key or access token (unrecognized login or wrong password)"}
    at fetchShopifyOrders (src/app/api/shopify/sync-orders/route.ts:324:13)
    at async POST (src/app/api/shopify/sync-orders/route.ts:387:27)
  322 |       }
  323 |       
> 324 |       throw new Error(`Shopify API error: ${response.status} ${response.statusText} - ${errorText}`);
      |             ^
  325 |     }
  326 |
  327 |     const data = await response.json();
 POST /api/shopify/sync-orders 500 in 558ms
 POST /api/shopify/sync-incremental 500 in 826ms
